From strnbrg@rahul.net Tue Aug  6 08:12:07 1996
Received: from informixs-bh.na.informix.com by bolero.rahul.net with SMTP id AA27879
  (5.67b8/IDA-1.5 for <strnbrg@rahul.net>); Mon, 5 Aug 1996 15:04:03 -0700
Received: (from uucp@localhost) by informixs-bh.na.informix.com (8.6.12/8.6.11) id RAA08363 for <strnbrg@rahul.net>; Mon, 5 Aug 1996 17:05:18 -0500
Received: from atlas.na.informix.com by informixs-bh.na.informix.com via smap (V1.3)
	id sma008341; Mon Aug  5 17:05:03 1996
Received: from wicked.na.informix.com by atlas.na.informix.com with SMTP
	(1.39.111.2/16.2) id AA209522622; Mon, 5 Aug 1996 17:03:42 -0500
Received: from wicked (localhost) by wicked.na.informix.com (5.x/SMI-SVR4)
	id AA01805; Mon, 5 Aug 1996 17:05:52 -0500
Sender: jrenaut@informix.com
Message-Id: <3206703E.3D61@informix.com>
Date: Mon, 05 Aug 1996 17:05:50 -0500
From: Jacques Renaut <jrenaut@informix.com>
X-Mailer: Mozilla 2.01 (X11; I; SunOS 5.4 sun4m)
Mime-Version: 1.0
Newsgroups: comp.unix.programmer
To: Theodore Sternberg <strnbrg@rahul.net>
Subject: Re: How do you "sleep" for < 1 second?
References: <4u57du$fns@samba.rahul.net>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Theodore Sternberg wrote:
> 
> Is there any way to rig a function like the C library's sleep, that will
> delay the program by less than one second (like, 1/20 second?) I don't
> want to just put the program into a loop (counting to 50000, say) because
> I'm concerned about CPU usage.
> 
> Ted Sternberg
> San Jose, California


You could use either the poll() or select() system call, for example:

tenths_sleep(n)
int4 n;
{
if (n==0) n=1;
#ifdef POLL
                  poll(0,0,(n*100));
#else  /* POLL */
 
{
struct timeval timeout;
timeout.tv_sec  = 0;
timeout.tv_usec = 100000*n;
select(0, 0, 0, 0, &timeout);
}
#endif  /* POLL */

Jacques

-- 
********************************************************************
*  Jacques P. Renaut               "I'd dazzle you with brilliance *
*  Informix Advanced Support        if I only had the knack..."    *
*  email: jrenaut@informix.com      #include <disclamier.h>        *
********************************************************************

From strnbrg@rahul.net Tue Aug  6 08:13:11 1996
Received: from spanner.eng.cam.ac.uk by bolero.rahul.net with SMTP id AA07033
  (5.67b8/IDA-1.5 for <strnbrg@rahul.net>); Tue, 6 Aug 1996 01:33:01 -0700
Received: from anvil.eng.cam.ac.uk
          (via tpl@anvil.eng.cam.ac.uk [129.169.8.36])
          by spanner.eng.cam.ac.uk with ESMTP id JAA06852
          for <strnbrg@rahul.net>; Tue, 6 Aug 1996 09:32:58 +0100
From: Tim Love <tpl@eng.cam.ac.uk>
Date: Tue, 6 Aug 1996 09:32:56 +0100
Message-Id: <199608060832.26053@anvil.eng.cam.ac.uk>
Received: (via tpl@localhost)
          by anvil.eng.cam.ac.uk id JAA26053;
          Tue, 6 Aug 1996 09:32:56 +0100
To: strnbrg@rahul.net
Subject: Re: How do you "sleep" for < 1 second?
Newsgroups: comp.unix.programmer
References: <4u57du$fns@samba.rahul.net>

In comp.unix.programmer you write:


>Is there any way to rig a function like the C library's sleep, that will
>delay the program by less than one second (like, 1/20 second?) I don't
>want to just put the program into a loop (counting to 50000, say) because
>I'm concerned about CPU usage. 

Use pause() plus the method in
http://www-h.eng.cam.ac.uk/help/tpl/languages/C/teaching_C/node52.html


